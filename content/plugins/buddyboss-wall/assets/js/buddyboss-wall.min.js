function budyboss_wall_comment_like_unlike(e){jq=jQuery;e=jq(e);if(e.hasClass("fav-comment")||e.hasClass("unfav-comment")){var t=e.hasClass("fav-comment")?"fav":"unfav";var n=e.closest("[id^=acomment-]");var r=n.attr("id").substr(9,n.attr("id").length);e.addClass("loading");jq.post(ajaxurl,{action:"activity_mark_"+t,cookie:bp_get_cookies(),id:r,item_type:"comment"},function(n){e.removeClass("loading");e.fadeOut(200,function(){jq(this).html(n);jq(this).attr("title","fav"==t?BP_DTheme.remove_fav:BP_DTheme.mark_as_fav);jq(this).fadeIn(200)});if("fav"==t){if(!jq(".item-list-tabs #activity-favs-personal-li").length){if(!jq(".item-list-tabs #activity-favorites").length)jq(".item-list-tabs ul #activity-mentions").before('<li id="activity-favorites"><a href="#">'+BP_DTheme.my_favs+" <span>0</span></a></li>");jq(".item-list-tabs ul #activity-favorites span").html(Number(jq(".item-list-tabs ul #activity-favorites span").html())+1)}e.removeClass("fav-comment");e.addClass("unfav-comment")}else{e.removeClass("unfav-comment");e.addClass("fav-comment");jq(".item-list-tabs ul #activity-favorites span").html(Number(jq(".item-list-tabs ul #activity-favorites span").html())-1);if(!Number(jq(".item-list-tabs ul #activity-favorites span").html())){if(jq(".item-list-tabs ul #activity-favorites").hasClass("selected"))bp_activity_request(null,null);jq(".item-list-tabs ul #activity-favorites").remove()}}})}return false}var jq=$=jQuery;window.Code=window.Code||{};window.Code.BuddyBoss_Wall_Util=function(e,t,n,r){var i={state:n,lang:function(e){var e=e||"undefined key!";return n[e]||"Language key missing for: "+e}};return i}(window,window.jQuery,window.BuddyBoss_Wall_Appstate||false);window.Code.BuddyBoss_Wall=function(e,t,n,r){var i={};var s=n.state||{},o=n.lang;var u={on:null,setup_form:function(){var e=t("#buddyboss-wall-tpl-form"),n=t("body.just-me.has-activity #item-body > .activity").first(),r=t("#whats-new-form");if(!r.length&&e.length&&n.length){}},setup_comments:function(){var e=t(".buddyboss-wall-tpl-activity-comments");e.each(function(){var e=t(this),n=e.parent().find(".activity-comments");if(n.length&&!e.data("buddyboss-wall-appended")){e.data("buddyboss-wall-appended",true);n.prepend(e.html())}})},setup:function(){u.on=true;t.ajaxPrefilter(u.prefilter);t(document).ajaxSuccess(function(e){u.setup_comments();setTimeout(u.setup_comments,205);setTimeout(u.setup_comments,500)});u.setup_form();u.setup_comments();var e=t("#buddyboss-wall-tpl-greeting").html(),n=t("#whats-new-form .activity-greeting");if(n.length&&!!e){n.html(e).show()}var r=t("#activity-favorites"),i=s.fav_tab_name||false,o;if(r.length&&i){o=r.find("span");r.find("a").html(i).append(o).addClass("localized")}},teardown:function(){u.on=false},prefilter:function(e,n,r){item_type=n.data&&n.data.item_type||"";var i=parseInt(n.data&&n.data.id||0),s=n.data&&n.data.action||"",o=s==="activity_mark_fav"||s==="activity_mark_unfav",a=item_type==="comment",f;if(o&&i>0){f=t("#activity-"+i).find(".button.loading");type=f.hasClass("fav")?"fav":"unfav";if(a){f=t("#acomment-"+i).find(".acomment-like.loading");type=f.hasClass("fav-comment")?"fav":"unfav"}e.success=function(e){return function(n,r,i){if(n[0]+n[1]==="-1"&&t.isFunction(e)){e(n)}else{u.success(f,type,a,n,r,i)}}}(e.success)}},success:function(e,t,n,r,i,s){var o=false,u="",a="",f=0,l=false,c=r.indexOf("{")!=-1?jQuery.parseJSON(r):false;if(c&&c.but_text){u=c.but_text}else{u=r}if(c&&c.hasOwnProperty("like_count")){if(c.like_count){o=true;a=c.num_likes}else{l=true}}e.fadeOut(200,function(){var e=jq(this),r=e.parents(".activity-item"),i=r.find(".activity-comments"),s=i.find("ul").first(),f=i.find(".activity-like-count"),c=i.find("li").not(".activity-like-count"),h=a;if(n){i=e.parents(".acomment-options");s=i.find("ul").first();f=i.find(".activity-like-count");c=i.find("li").not(".activity-like-count");h=a}e.html(u);e.attr("title","fav"==t?BP_DTheme.remove_fav:BP_DTheme.mark_as_fav);e.fadeIn(200);f.remove();if(o){if(s.length){s.prepend(h)}else{if(n){i.append('<ul class="acomment-reply-like-content">'+h+"</ul>")}else{i.prepend("<ul>"+h+"</ul>")}}}if(l&&s.length&&!c.length){s.remove()}});if("fav"==t){f=Number(jq(".item-list-tabs ul #activity-favorites span").html())+1;if(!jq(".item-list-tabs #activity-favorites").length)jq(".item-list-tabs ul li#activity-mentions").before('<li id="activity-favorites"><a href="#" class="localized">'+BP_DTheme.my_favs+" <span>0</span></a></li>");if(n){e.removeClass("fav-comment");e.addClass("unfav-comment")}else{e.removeClass("fav");e.addClass("unfav")}jq(".item-list-tabs ul #activity-favorites span").html(Number(jq(".item-list-tabs ul #activity-favorites span").html())+1)}else{f=Number(jq(".item-list-tabs ul #activity-favorites span").html())-1;if(n){e.removeClass("unfav-comment");e.addClass("fav-comment")}else{e.removeClass("unfav");e.addClass("fav")}jq(".item-list-tabs ul #activity-favorites span").html(f);if(f==0){if(jq(".item-list-tabs ul #activity-favorites").hasClass("selected"))bp_activity_request(null,null);jq(".item-list-tabs ul #activity-favorites").remove()}}if("activity-favorites"==jq(".item-list-tabs li.selected").attr("id"))e.closest(".activity-item").slideUp(100);e.removeClass("loading")}};t(document).ready(function(){u.setup()});var a={setup:function(){u.setup()},teardown:function(){u.teardown()}};return a}(window,window.jQuery,window.Code.BuddyBoss_Wall_Util);(function(e,t,n,r){var i={ajaxResetTimeout:201};var s=n.state||{};var o=n.lang;var u={};var a={};u.init=function(){a.document=t(document);a.document.ajaxSuccess(u.ajaxSuccessListener);u.initTooltips();if(BP_DTheme&&s){t.extend(BP_DTheme,s)}};u.ajaxSuccessListener=function(t,n,r){u.destroyTooltips();e.setTimeout(u.initTooltips,i.ajaxResetTimeout)};u.destroyTooltips=function(){if(a.tooltips&&a.tooltips.length){a.tooltips.tooltipster("destroy");a.tooltips=null}};u.initTooltips=function(){a.tooltips=t(".buddyboss-wall-tt-others");if(a.tooltips.length){a.tooltips.tooltipster({contentAsHTML:true,functionInit:u.getTooltipContent,interactive:true,position:"top-left",theme:"tooltipster-buddyboss"})}};u.getTooltipContent=function(e,t){var n=e.parent().find(".buddyboss-wall-tt-content").detach().html();return n};if(s.load_tooltips){u.load_tooltips=true}jQuery(document).ready(function(){if(u.load_tooltips===true)u.initTooltips()})})(window,window.jQuery,window.Code.BuddyBoss_Wall_Util)